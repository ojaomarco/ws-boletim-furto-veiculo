<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.0/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js"></script>
    <title>Cadastrar B.O.</title>
</head>

<body class="bg-dark bg-gradient">
    <nav class=" container navbar navbar-expand-lg bg-secondary">
        <div class="container">
            <a class="navbar-brand text-light" href="index.html">
                <img src='img/icon-policial.png' width="45" class="d-inline-block " />
                Delegacia
            </a>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav ">
                    <button class=" nav-link active text-light btn btn-dark border-start me-2" href="#">Cadastrar
                        B.O.</button>
                    <button class=" nav-link text-light btn btn-primary border-start" href="#">Relatório</button>
                </div>
            </div>
        </div>
    </nav>
    <div class="container bg-dark ps-5 pe-5" style="height: 100vh;">
        <div class="row text-light">
            <div class="col">
                <h3>Dados da ocorrência</h3>
                <div class="input-group m-1">
                    <div class="input-group-text w-25">Data</div>
                    <input type="text" class="form-control form-control-sm" id="data" placeholder="Data">
                </div>
                <div class="input-group  m-1">
                    <div class="input-group-text w-25">Período</div>
                    <input type="text" class="form-control form-control-sm" id="periodo" placeholder="Período" required>
                </div>
                <div class="input-group  m-1">
                    <div class="input-group-text w-25 ">Lograd.</div>
                    <input type="text" class="form-control form-control-sm" id="logradouro" placeholder="Logradouro">
                </div>
                <div class="input-group m-1">
                    <div class="input-group-text w-25">Numero</div>
                    <input type="text" class="form-control form-control-sm" id="numero" placeholder="Numero">
                </div>
                <div class="input-group   m-1">
                    <div class="input-group-text w-25">Bairro</div>
                    <input type="text" class="form-control form-control-sm" id="bairro" placeholder="Bairro">
                </div>
                <div class="input-group m-1">
                    <div class="input-group-text w-25">Cidade</div>
                    <input type="text" class="form-control form-control-sm" id="cidade" placeholder="Cidade">
                </div>
                <div class="input-group m-1">
                    <div class="input-group-text w-25">Estado</div>
                    <input type="text" class="form-control form-control-sm" id="estado" placeholder="Estado">
                </div>
            </div>

            <div class="col">
                <h3>Dados do veículo</h3>
                <div class="input-group m-1">
                    <div class="input-group-text w-25">Placa</div>
                    <input type="text" class="form-control form-control-sm" id="placa" placeholder="Placa">
                </div>
                <div class="input-group m-1">
                    <div class="input-group-text w-25">Estado</div>
                    <input type="text" class="form-control form-control-sm" id="estadoPlaca" placeholder="Estado">
                </div>
                <div class="input-group m-1">
                    <div class="input-group-text w-25">Cidade</div>
                    <input type="text" class="form-control form-control-sm" id="cidadePlaca" placeholder="Cidade">
                </div>
                <div class="input-group m-1">
                    <div class="input-group-text w-25">Cor</div>
                    <input type="text" class="form-control form-control-sm" id="cor" placeholder="Cor">
                </div>
                <div class="input-group m-1">
                    <div class="input-group-text w-25">Marca</div>
                    <input type="text" class="form-control form-control-sm" id="marca" placeholder="Marca">
                </div>
                <div class="input-group m-1">
                    <div class="input-group-text w-25">Tipo</div>
                    <input type="text" class="form-control form-control-sm" id="tipo" placeholder="Tipo">
                </div>
                <div class="input-group m-1">
                    <div class="input-group-text w-25">Ano</div>
                    <input type="text" class="form-control form-control-sm" id="ano" placeholder="Ano">
                </div>
                <br>
            </div>
            <div class="col">
                <h3>Dados da vítima</h3>
                <div class="input-group m-1">
                    <div class="input-group-text w-25">Nome</div>
                    <input type="text" class="form-control form-control-sm" id="nome" placeholder="Nome">
                </div>
                <div class="input-group m-1">
                    <div class="input-group-text w-25">Email</div>
                    <input type="text" class="form-control form-control-sm" id="email" placeholder="Email">
                </div>
                <div class="input-group m-1">
                    <div class="input-group-text w-25">Telefone</div>
                    <input type="text" class="form-control form-control-sm" id="telefone" placeholder="Telefone">
                </div>
                <br>
            </div>
            <center>
                <button class=" btn btn-danger" id="botaoCancelar"
                    onclick="location.href = 'index.html';">Voltar</button>
                <button class=" btn btn-primary" id="botaoCadastrar">Cadastrar</button>
            </center>
            <br><br>
            <div id="resultado"></div>
            <!-- </div> -->
        </div>

        <div class="d-block fixed-bottom">
            <div class="text-light text-center">
                <span class='header'>Delegacia Eletrônica</span><br>
                <span class='header'><b>Boletim de Ocorrência </b></span><br>
                <span class='header'>Controle de Furto de Veículos</span><br>
            </div>
        </div>
    </div>


</body>
<script>
    $(document).ready(function () {
        $("#data").datepicker({
            dateFormat: 'yy-mm-dd'
        });
    });


    var cadastrar = function (url) {
        var bo = {
            dataOcorrencia: $("#data").val(),
            periodoOcorrencia: $("#periodo").val(),
            localOcorrencia: {
                logradouro: $("#logradouro").val(),
                numero: $("#numero").val(),
                bairro: $("#bairro").val(),
                cidade: $("#cidade").val(),
                estado: $("#estado").val()
            },
            veiculoFurtado: {
                emplacamento: {
                    placa: $("#placa").val(),
                    cidade: $("#cidadePlaca").val(),
                    estado: $("#estadoPlaca").val()
                },
                anoFabricacao: $("#ano").val(),
                cor: $("#cor").val(),
                marca: $("#marca").val(),
                tipoVeiculo: $("#tipo").val()
            },
            partes: [{
                nome: $("#nome").val(),
                email: $("#email").val(),
                telefone: $("#telefone").val(),
            }]
        };

        $.ajax({
            url: url,
            type: 'POST',
            async: true,
            contentType: 'application/json',
            data: JSON.stringify(bo),
            success: function (boCadastrado) {
                $("#resultado").empty();
                $("#resultado").html("Boletim cadastrado com sucesso! <br> Identificador: " + boCadastrado.identificador);
            },
            error: function (xhr, status, error) {
                $("#resultado").empty();
                // $("#resultado").append("Erro ao cadastrar: " + xhr.responseText)
                $("#resultado").html(JSON.stringify(bo))
            }
        });
    }

        $(document).ready(function () {
            $("#botaoCadastrar").click(function () {
                cadastrar("http://localhost:8080/webservice/boletins");
            });
        });
</script>


</html>